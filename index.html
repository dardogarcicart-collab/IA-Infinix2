<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Infinix AI - Sistema Avanzado de Inteligencia Artificial para Matem√°ticas, F√≠sica, Qu√≠mica y Programaci√≥n">
    <meta name="author" content="Tu Nombre">
    <title>Infinix AI - Sistema Avanzado</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla de carga -->
    <div id="loading-screen">
        <svg class="ram-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="40" fill="none" stroke="#ff3333" stroke-width="6"/>
            <circle cx="50" cy="50" r="8" fill="#ff3333"/>
            <line x1="50" y1="50" x2="50" y2="15" stroke="#ff3333" stroke-width="4"/>
            <line x1="50" y1="50" x2="85" y2="50" stroke="#ff3333" stroke-width="4"/>
            <line x1="50" y1="50" x2="50" y2="85" stroke="#ff3333" stroke-width="4"/>
            <line x1="50" y1="50" x2="15" y2="50" stroke="#ff3333" stroke-width="4"/>
            <circle cx="50" cy="15" r="5" fill="#ff3333"/>
            <circle cx="85" cy="50" r="5" fill="#ff3333"/>
            <circle cx="50" cy="85" r="5" fill="#ff3333"/>
            <circle cx="15" cy="50" r="5" fill="#ff3333"/>
            <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2s" repeatCount="indefinite"/>
        </svg>
        <div class="loading-text">Cargando la RAM</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
    </div>

    <!-- Interfaz principal: contenedor principal con header, aside (stats), main (chat) y footer (entrada) -->
    <div id="main-interface">
        <!-- Header -->
        <header class="header">
            <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="40" fill="none" stroke="#ff3333" stroke-width="6"/>
                <circle cx="50" cy="50" r="8" fill="#ff3333"/>
                <line x1="50" y1="50" x2="50" y2="15" stroke="#ff3333" stroke-width="4"/>
                <line x1="50" y1="50" x2="85" y2="50" stroke="#ff3333" stroke-width="4"/>
                <line x1="50" y1="50" x2="50" y2="85" stroke="#ff3333" stroke-width="4"/>
                <line x1="50" y1="50" x2="15" y2="50" stroke="#ff3333" stroke-width="4"/>
                <circle cx="50" cy="15" r="5" fill="#ff3333"/>
                <circle cx="85" cy="50" r="5" fill="#ff3333"/>
                <circle cx="50" cy="85" r="5" fill="#ff3333"/>
                <circle cx="15" cy="50" r="5" fill="#ff3333"/>
            </svg>
            <h1 id="aiName">‚ö° Infinix-4</h1>
            <p id="aiEngine">Powered by Infinix 4 Ultra AI Engine</p>
            <div class="header-actions">
                <button id="toggleTheme" aria-pressed="false" aria-label="Cambiar tema">üåô</button>
                <button id="openHistory" aria-label="Mostrar historial">üìö</button>
            </div>
            
            <!-- Selector de versi√≥n -->
            <nav class="version-selector" role="navigation" aria-label="Selector de versi√≥n">
                <button class="version-btn active" onclick="cambiarVersion(4)" aria-pressed="true">Infinix 4 ‚úÖ</button>
                <button class="version-btn" onclick="cambiarVersion(5)" aria-pressed="false">Fanix 5 ‚úÖ</button>
                <button class="version-btn" onclick="cambiarVersion(6)" aria-pressed="false">Infinix 6 üî•</button>
            </nav>
        </header>

        <!-- Panel de estad√≠sticas (aside) - accesible y separado del main -->
        <aside class="stats-panel" role="complementary" aria-label="Estad√≠sticas">
            <div class="stat-item">
                <span class="stat-value" id="messageCount">0</span>
                <span>Mensajes</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="calcCount">0</span>
                <span>C√°lculos</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="versionLabel">Infinix 4</span>
                <span>Versi√≥n</span>
            </div>
        </div>

        <!-- Temporizador de prueba -->
        <div class="trial-timer" id="trialTimer" role="timer" aria-live="polite">
            ‚è±Ô∏è Prueba de Infinix 6: <span id="timeRemaining">10:00</span> restantes
        </div>

        <!-- Barra de herramientas matem√°ticas -->
        <nav class="math-toolbar" role="toolbar" aria-label="Herramientas matem√°ticas">
            <button class="tool-btn" onclick="insertarFuncion('‚àö(')" aria-label="Ra√≠z cuadrada">‚àö</button>
            <button class="tool-btn" onclick="insertarFuncion('sin(')" aria-label="Seno">sin</button>
            <button class="tool-btn" onclick="insertarFuncion('cos(')" aria-label="Coseno">cos</button>
            <button class="tool-btn" onclick="insertarFuncion('tan(')" aria-label="Tangente">tan</button>
            <button class="tool-btn" onclick="insertarFuncion('log(')" aria-label="Logaritmo">log</button>
            <button class="tool-btn" onclick="insertarFuncion('ln(')" aria-label="Logaritmo natural">ln</button>
            <button class="tool-btn" onclick="mostrarFraccion()" aria-label="Fracciones">‚ÅÑ</button>
            <button class="tool-btn" onclick="insertarFuncion('(')" aria-label="Par√©ntesis">( )</button>
            <button class="tool-btn" onclick="insertarFuncion('^')" aria-label="Potencia">x‚Åø</button>
            <button class="tool-btn" onclick="insertarFuncion('œÄ')" aria-label="Pi">œÄ</button>
            <button class="tool-btn" onclick="insertarFuncion('e')" aria-label="N√∫mero de Euler">e</button>
            <button class="tool-btn" onclick="resolverEcuacion()" aria-label="Resolver ecuaci√≥n">Ec.</button>
            <button class="tool-btn" onclick="generarGrafica()" aria-label="Generar gr√°fica">üìä</button>
            <button class="tool-btn" onclick="limpiarChat()" aria-label="Limpiar chat">üóëÔ∏è</button>
        </nav>

        <!-- Contenedor de chat (main) -->
        <main class="chat-container" id="chatContainer" role="main" aria-live="polite" aria-label="√Årea de chat"></main>

        <!-- √Årea de entrada (footer) - formulario accesible -->
        <footer class="input-area" role="contentinfo" aria-label="√Årea de entrada">
            <label for="userInput" class="visually-hidden">Escribe tu mensaje o ecuaci√≥n</label>
            <input 
                type="text" 
                id="userInput" 
                placeholder="Escribe tu mensaje o ecuaci√≥n aqu√≠..." 
                aria-label="Campo de entrada de mensaje"
                autocomplete="off"
            />
            <button onclick="sendMessage()" aria-label="Enviar mensaje">Enviar</button>
        </footer>
    </div>

    <!-- Modal de gr√°fica -->
    <div id="graphModal" class="graph-modal" role="dialog" aria-hidden="true">
        <div class="graph-content" role="document">
            <button id="closeGraph" class="graph-close" aria-label="Cerrar gr√°fica">‚úï</button>
            <div class="graph-header">
                <label for="graphExpr">f(x) = </label>
                <input id="graphExpr" type="text" placeholder="ej: x^2 or sin(x)" aria-label="Expresi√≥n de la funci√≥n" />
                <button id="plotBtn">Graficar</button>
            </div>
            <canvas id="graphCanvas" width="800" height="360" aria-label="Gr√°fica de la funci√≥n"></canvas>
            <div class="graph-controls">
                <label>Rango X: <input id="xMin" type="number" value="-10" step="1"/> a <input id="xMax" type="number" value="10" step="1"/></label>
                <button id="autoScale">Auto</button>
            </div>
        </div>
    </div>

    <!-- Modal de c√≥digo generado -->
    <div id="codeModal" class="code-modal" role="dialog" aria-hidden="true">
        <div class="code-content" role="document">
            <button id="closeCode" class="code-close" aria-label="Cerrar c√≥digo">‚úï</button>
            <div class="code-header">
                <h2 id="codeLang">C√≥digo generado</h2>
                <button id="copyCodeBtn">üìã Copiar</button>
            </div>
            <pre><code id="codeBlock" class="code-block"></code></pre>
        </div>
    </div>

    <!-- Modal de login -->
    <div id="loginModal" class="login-modal" role="dialog" aria-hidden="true">
        <div class="login-content" role="document">
            <h2>Iniciar sesi√≥n</h2>
            <label for="loginUser">Usuario</label>
            <input id="loginUser" type="text" placeholder="usuario" />
            <label for="loginPass">Contrase√±a</label>
            <input id="loginPass" type="password" placeholder="contrase√±a" />
            <div style="margin-top:10px; display:flex; gap:8px;">
                <button id="loginBtn">Iniciar sesi√≥n</button>
                <button id="loginCancel">Cancelar</button>
            </div>
            <p style="font-size:12px; opacity:0.8; margin-top:8px;">Cuenta demo: usuario <strong>demo</strong>, contrase√±a <strong>demo</strong></p>
        </div>
    </div>

    <!-- Core modules (foundation) -->
    <script src="src/core/config.js"></script>
    <script src="src/core/logger.js"></script>
    <script src="src/core/auth.js"></script>
    <script src="src/core/language_analyzer.js"></script>
    <script src="src/core/personality.js"></script>
    
    <!-- Advanced features (building blocks) -->
    <script src="src/plugins/plugins_system.js"></script>
    <script src="src/plugins/user_profiles.js"></script>
    <script src="src/core/rules_engine.js"></script>
    <script src="src/core/learning_system.js"></script>
    
    <!-- AI engines -->
    <script src="src/ai/ai_engine.js"></script>
    <script src="src/ai/code_generator.js"></script>
    
    <!-- Main application -->
    <script src="script.js"></script>
    
    <!-- Developer tools -->
    <script src="src/tools/debug_panel.js"></script>
    
    <!-- Debug shortcuts -->
    <script>
        // Mostrar panel de debug con Ctrl+D
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key.toLowerCase() === 'd'){
                e.preventDefault();
                DebugPanel?.toggle?.();
            }
        });
    </script>
</body>
</html>