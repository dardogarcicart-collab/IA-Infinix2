<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Infinix AI v4 - Sistema Avanzado de Inteligencia Artificial">
    <meta name="author" content="Infinix Team">
    <meta name="theme-color" content="#ff3333">
    <title>Infinix AI v4</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Pantalla de carga -->
    <div id="loading-screen">
        <svg class="ram-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="40" fill="none" stroke="#ff3333" stroke-width="6"/>
            <circle cx="50" cy="50" r="8" fill="#ff3333"/>
            <line x1="50" y1="50" x2="50" y2="15" stroke="#ff3333" stroke-width="4"/>
            <line x1="50" y1="50" x2="85" y2="50" stroke="#ff3333" stroke-width="4"/>
            <line x1="50" y1="50" x2="50" y2="85" stroke="#ff3333" stroke-width="4"/>
            <line x1="50" y1="50" x2="15" y2="50" stroke="#ff3333" stroke-width="4"/>
            <circle cx="50" cy="15" r="5" fill="#ff3333"/>
            <circle cx="85" cy="50" r="5" fill="#ff3333"/>
            <circle cx="50" cy="85" r="5" fill="#ff3333"/>
            <circle cx="15" cy="50" r="5" fill="#ff3333"/>
            <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2s" repeatCount="indefinite"/>
        </svg>
        <div class="loading-text">Cargando la RAM</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
    </div>

    <!-- Interfaz principal: contenedor principal con header, aside (stats), main (chat) y footer (entrada) -->
    <div id="main-interface">
        <!-- Header -->
        <header class="header">
            <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="40" fill="none" stroke="#ff3333" stroke-width="6"/>
                <circle cx="50" cy="50" r="8" fill="#ff3333"/>
                <line x1="50" y1="50" x2="50" y2="15" stroke="#ff3333" stroke-width="4"/>
                <line x1="50" y1="50" x2="85" y2="50" stroke="#ff3333" stroke-width="4"/>
                <line x1="50" y1="50" x2="50" y2="85" stroke="#ff3333" stroke-width="4"/>
                <line x1="50" y1="50" x2="15" y2="50" stroke="#ff3333" stroke-width="4"/>
                <circle cx="50" cy="15" r="5" fill="#ff3333"/>
                <circle cx="85" cy="50" r="5" fill="#ff3333"/>
                <circle cx="50" cy="85" r="5" fill="#ff3333"/>
                <circle cx="15" cy="50" r="5" fill="#ff3333"/>
            </svg>
            <h1 id="aiName">‚ö° Infinix-4</h1>
            <p id="aiEngine">Powered by Infinix 4 AI Engine</p>
            <div class="header-actions">
                <button id="toggleTheme" aria-pressed="false" aria-label="Cambiar tema">üåô</button>
                <button id="openHistory" aria-label="Mostrar historial">üìö</button>
            </div>
            
            <!-- Selector de versi√≥n -->
            <nav class="version-selector" role="navigation" aria-label="Selector de versi√≥n">
                <button class="version-btn active" onclick="cambiarVersion(4)" aria-pressed="true">Infinix 4 ‚úÖ</button>
                <button class="version-btn" onclick="cambiarVersion(5)" aria-pressed="false">Fanix 5 ‚úÖ</button>
                <button class="version-btn" onclick="cambiarVersion(6)" aria-pressed="false">Infinix 6 üî•</button>
            </nav>
        </header>

        <!-- Panel de estad√≠sticas (aside) - accesible y separado del main -->
        <aside class="stats-panel" role="complementary" aria-label="Estad√≠sticas">
            <div class="stat-item">
                <span class="stat-value" id="messageCount">0</span>
                <span>Mensajes</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="calcCount">0</span>
                <span>C√°lculos</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="versionLabel">Infinix 4</span>
                <span>Versi√≥n</span>
            </div>
        </aside>

        <!-- Temporizador de prueba -->
        <div class="trial-timer" id="trialTimer" role="timer" aria-live="polite">
            ‚è±Ô∏è Prueba: <span id="timeRemaining">10:00</span> restantes
        </div>

        <!-- Barra de herramientas matem√°ticas -->
        <nav class="math-toolbar" role="toolbar" aria-label="Herramientas matem√°ticas">
            <button class="tool-btn" onclick="insertarFuncion('‚àö(')" aria-label="Ra√≠z cuadrada">‚àö</button>
            <button class="tool-btn" onclick="insertarFuncion('sin(')" aria-label="Seno">sin</button>
            <button class="tool-btn" onclick="insertarFuncion('cos(')" aria-label="Coseno">cos</button>
            <button class="tool-btn" onclick="insertarFuncion('tan(')" aria-label="Tangente">tan</button>
            <button class="tool-btn" onclick="insertarFuncion('log(')" aria-label="Logaritmo">log</button>
            <button class="tool-btn" onclick="insertarFuncion('ln(')" aria-label="Logaritmo natural">ln</button>
            <button class="tool-btn" onclick="insertarFuncion('^')" aria-label="Potencia">x‚Åø</button>
            <button class="tool-btn" onclick="insertarFuncion('œÄ')" aria-label="Pi">œÄ</button>
            <button class="tool-btn" onclick="limpiarChat()" aria-label="Limpiar chat">üóëÔ∏è</button>
        </nav>

        <!-- Contenedor de chat (main) -->
        <main class="chat-container" id="chatContainer" role="main" aria-live="polite" aria-label="√Årea de chat"></main>

        <!-- √Årea de entrada (footer) - formulario accesible -->
        <footer class="input-area" role="contentinfo" aria-label="√Årea de entrada">
            <label for="userInput" class="visually-hidden">Escribe tu mensaje o ecuaci√≥n</label>
            <input 
                type="text" 
                id="userInput" 
                placeholder="Escribe tu mensaje o ecuaci√≥n aqu√≠..." 
                aria-label="Campo de entrada de mensaje"
                autocomplete="off"
            />
            <button onclick="sendMessage()" aria-label="Enviar mensaje">Enviar</button>
        </footer>aqu√≠..." 
                aria-label="Campo de entrada"
                autocomplete="off"
            />s -->
    <div id="graphModal" class="graph-modal" role="dialog" aria-hidden="true">
        <div class="graph-content" role="document">
            <button id="closeGraph" class="graph-close" aria-label="Cerrar gr√°fica">‚úï</button>
            <div class="graph-header">
                <label for="graphExpr">f(x) = </label>
                <input id="graphExpr" type="text" placeholder="ej: x^2 or sin(x)" aria-label="Expresi√≥n" />
                <button id="plotBtn">Graficar</button>
            </div>
            <canvas id="graphCanvas" width="800" height="360" aria-label="Gr√°fica"></canvas>
        </div>
    </div>

    <!-- Modal de c√≥digo -->
    <div id="codeModal" class="code-modal" role="dialog" aria-hidden="true">
        <div class="code-content" role="document">
            <button id="closeCode" class="code-close" aria-label="Cerrar c√≥digo">‚úï</button>
            <div class="code-header">
                <h2 id="codeLang">C√≥digo</h2>
                <button id="copyCodeBtn">üìã Copiar</button>
            </div>
            <pre><code id="codeBlock" class="code-block"></code></pre>
        </div>
    </div>

    <!-- Scripts en orden correcto -->
    <!-- 1. Core -->
    <script src="js/config.js"></script>
    <script src="js/logger.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/personality.js"></script>
    <script src="js/language_analyzer.js"></script>
    
    <!-- 2. Sistemas avanzados -->
    <script src="js/plugins_system.js"></script>
    <script src="js/user_profiles.js"></script>
    <script src="js/rules_engine.js"></script>
    <script src="js/learning_system.js"></script>
    
    <!-- 3. IA y generaci√≥n -->
    <script src="js/ai_engine.js"></script>
    <script src="js/code_generator.js"></script>
    
    <!-- 4. Debug y principal -->
    <script src="js/debug_panel.js"></script>
    <script src="js/script.js"></script>

    <!-- Inicializar cuando el DOM est√© listo -->
    <script>
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', inicializarApp);
        } else {
            inicializarApp();
        }     e.preventDefault();
                DebugPanel?.toggle?.();
            }
        });
    </script>
</body>
</html>